{% extends 'base3.html' %}
{% load static %}
<head>
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.min.css'>
</head>
{% block body %}

    <section class="banner">
        <div class="inner">




        </div>
        <style>
            .banner {
                height: 50vh;
                background-image: url(' {% static 'images/colorbnr.jpg'%}');
                background-size: cover;
                background-attachment: fixed;


            }

            .headtext {
                font-size: 80px;
            }

            .inner {
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                display: flex;
                align-items: center;
                justify-content: center;
                flex-direction: column;
            }

            @media all and (max-width: 500px) {
                .banner {
                    height: 25vh;


                }

                .headtext {
                    font-size: 30px;
                }
            }

            .flex {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            img{
                max-height: 400px;
            }
            .work
            {
                height: 400px;
                overflow-y: scroll;
            }
         
            .letf-side-card{
            height: 300px;
            border: none;
            
            }
            .letf-side-card:hover
            {
                box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
            }
            
                .card-body
                {
                    border: none;
                }
            .card-body a
            {
                font-size: 10px;
                
            }
            .letf-side-card .card-body p{
                font-size: 13px;
            }
            .table-responsive
                {
                max-height: 400px;
                overflow-y: scroll;
                background-color: rgb(238, 238, 237);
                font-size: 12px;
                }
        </style>
    </section>
    <section class="profile container mb-5">
        <div class="profile0 row bg-light shadow ">
            <div class="col-lg-3  d-flex flex-column pt-3 boxl">
                
               <div class="work card mt-2 p-2">
                <h6 class="text-center pt-3 mb-2">New Works</h6>
                {% if frwork %}
                {% for i in frwork %}
                <div class="card letf-side-card mb-3 p-2">
                    <div class="card-body">
                        <p>Category: {{i.fr_categori}}</p>
                        <p>Client : {{i.fr_user}}</p>
                        <p>End Date: {{i.end_date}}</p>
                        <a href="{% url 'freelancer_work_accept' i.id %}" class="btn btn-success">Accept</a>
                        <a href="{% url 'freelancer_work_reject' i.id %}" class="btn btn-danger">Reject</a>
                    </div>
                    
                </div>
               {% endfor %}
               {% else %}
               <div class="card letf-side-card mb-3 p-2">
                <p class="text-center" style="font-size: 13px;"><b>You Have No Work Yet</b></p>
               </div>
               {% endif %}
               </div>
            </div>
            <div class="col-lg-9 py-4">
                <div class="card">

                    <div class="card-body" style="height:70vh">
                        <div class="text-center mb-3">
                            <h6 class="" style="font-weight: 600;"> Accepted Works</h6>
                        </div>
                        
                        <div class="row">
                           
                            <div class="col-md-12 col-lg-12 col-sm-12 col-12">
                              <input type="text" id="myInput1" onkeyup="myFunction()" class="form-control" placeholder="Search " style="width:100%"/>
                            </div>
                          </div><br>
                        <div class="table-responsive">
                            <table  class="table table-striped" >
                              <thead>
                                <tr class="header">
                                  
                                  <th>Category</th>
                                  <th>User</th>
                                  <th>Start Date</th>
                                  <th>End Date</th>
                                  <th>File</th>
                                  <th>Status</th>
                                  <th>Action</th>
                                  
                                </tr>
                              </thead>
                              <tbody id="myTable1" >
                              {% for i in frworks %}
                              
                                <tr>
                                 <td>{{i.fr_categori}}</td>
                                 <td>{{i.fr_user}}</td>
                                 
                                 <td>{{i.start_date}}</td>
                                 <td>{{i.end_date}}</td>
                                 <td>
                                    {% if i.fr_file %}
                                    <a href="#" download="{{i.fr_file.url}}"><i class="fa fa-file" style="color: rgb(255, 5, 72);"></i></a>
                                    {% else %} 
                                    <a href="#" ><i class="fa fa-file" style="color: rgb(255, 5, 72);"></i></a> 
                                    {% endif %}
                                    
                                 </td>
                                 <td>
                                    {% if i.fr_status == '3' %}
                                    Progress
                                    {% elif i.fr_status == '1' %}
                                    Completed
                                    {% endif %}
                
                                 </td>
                                 <td>
                                    {% if i.fr_status == '1' %}
                                        <a href="#" class="btn btn-success"> Submitted</a>
                                    {% else %}
                                        <a href="#demo-modal{{i.id}}" class="btn btn-success"> Submitt</a>
                                    {% endif %}
                                 </td>
                                </tr>
                              
                              
                              {% endfor %}
                            </tbody>
                            </table>
                          </div>
                        
                    </div>
                </div>
                
           

            </div>
           

        </div>

        <style>
            .profile0 {
                margin-top: -200px;
                border: 1px solid rgb(188, 188, 188);
                border-radius: 10px;

            }.profile0 .boxl img {
                width: 300px;
            }

            .grybdr {
                border-right: 1px solid rgb(200, 200, 200);
            }

            .rdmr {
                display: flex;
                align-items: center;
                justify-content: end;
            }

            .rdmr button {
                border: 1px solid rgba(0, 0, 0, 0);

                color: rgb(255, 5, 72);

            }

            .rdmr button:hover {
                border: 1px solid rgb(255, 5, 72);
                color: rgb(255, 5, 72);

            }

            .red {
                color: rgb(255, 5, 72);

            }

            .redbg {
                background-color: rgb(255, 5, 72);
            }

            .dark {
                background-color: rgb(202, 218, 232);
            }

            .bdrlft {
                border-left: 1px solid rgb(200, 200, 200);
            }

            .bdrbtm {
                border-bottom: 1px solid rgb(200, 200, 200);
            }

            @media only screen and (max-width:990px) {

                .profile0 {
                    margin-top: auto;
                }

                .profile0 .boxl img {
                    margin-top: -120px;
                    border-radius: 200px;
                    width: 200px;
                }


            }
        </style>

    </section>

 

<!-- submit modal -->
{% for i in frworks %}
<div id="demo-modal{{i.id}}" class="modal">
    <div class="modal__content">
        
        <div class="card p-3 text-center">
            <h6 class="text-start pt-1 mb-4" style="font-size: 14px; color:rgb(15, 15, 49)">Upload Your Work</h6>
        <form action="{% url 'freelancer_workfile_submit' i.id %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
                <input type="file" class="form-control mb-3" name="work_file">
                <button type="submit" class="btn btn-success w-50" id="success-btn">Save</button>
            

        </form>
        </div>
        <a href="#" class="modal__close">&times;</a>
    </div>
</div>
{% endfor %}
<style>
    .modal {
        visibility: hidden;
        opacity: 0;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(77, 77, 77, .7);
        transition: all .4s;
      }
      
      .modal:target {
        visibility: visible;
        opacity: 1;
      }
      
      .modal__content {
        border-radius: 4px;
        position: relative;
        width: 500px;
        max-width: 90%;
        background: #fff;
        padding: 1em 2em;
      }
      
      
      .modal__close {
        position: absolute;
        top: 10px;
        right: 10px;
        color: #585858;
        text-decoration: none;
      }
      
</style>



<script src="https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.all.min.js"></script>  


{% if file_msg %}
<script>
    swal("Good job!", '{{file_msg}}', "success")
</script>

{% endif %}
{% if msg %}
<script>
    swal("Good job!", '{{msg}}', "success")
</script>
{% endif %}

{% if rej %}
<script>
    swal("Good job!", '{{rej}}', "success")
</script>
{% endif %}


     
<script>
    $(document).ready(function(){
      $("#myInput1").on("keyup", function() {
        var value = $(this).val().toLowerCase();
        $("#myTable1 tr").filter(function() {
          $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
      });
    });
</script>

    {% endblock %}